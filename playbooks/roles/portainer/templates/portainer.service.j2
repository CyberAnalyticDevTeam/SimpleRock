[Unit]
Description = Portainer Container Service

Wants    = network.target
Requires = docker.service
After    = docker.service

[Service]
Type = simple

ExecStartPre = /usr/sbin/iptables -I INPUT 1 -p tcp --dport {{ portainer_port }} -j ACCEPT
 ExecStart = /usr/bin/docker-compose -f {{ rocknsm_dir }}/portainer/portainer-compose.yml up

 ExecStop  = /usr/bin/docker-compose -f {{ rocknsm_dir }}/portainer/portainer-compose.yml down -v
ExecStop = /usr/sbin/iptables -D INPUT -p tcp --dport {{ portainer_port }} -j ACCEPT

[Install]
WantedBy = multi-user.target
