# site.yml is the overall playbook, but all it does is include the other playbooks that are part of the site. For more
# information about the structure see:
# http://docs.ansible.com/ansible/latest/playbooks_best_practices.html
# http://docs.ansible.com/ansible/latest/intro_inventory.html
# We follow the guidance to include naming conventions there.

---

tasks:

- hosts: all

  tasks:

  - name: Add localhost if running in a standalone configuration
    add_host:
      hostname: 127.0.0.1
      groups: servers,sensor
      ansible_connection: local
    when: standalone is defined and standalone

  - name: Apply override settings, if available
    include_vars: /etc/rocknsm/config.yml

- import_playbook: servers.yml
- import_playbook: sensors.yml
